(executable
 (public_name act)
 (modules act)
 (libraries base core_kernel core toplevel act.utils))

(executable
 (name act_backend)
 (public_name act-backend)
 (modules act_backend)
 (libraries base core_kernel core toplevel cmd_backend))

(executable
 (name act_c)
 (public_name act-c)
 (modules act_c)
 (libraries base core_kernel core toplevel cmd_c))

(executable
 (name act_config)
 (public_name act-config)
 (modules act_config)
 (libraries base core_kernel core toplevel cmd_config))

(executable
 (name act_fuzz)
 (public_name act-fuzz)
 (modules act_fuzz)
 (libraries base core_kernel core toplevel cmd_fuzz))

(executable
 (name act_state)
 (public_name act-state)
 (modules act_state)
 (libraries base core_kernel core toplevel cmd_state))

(rule
 (targets specs.output)
 (action
  (with-stdout-to
   specs.output
   (run act-config "list-compilers" "-verbose" "-config" "act.conf.example")))
 (deps "act.conf.example"))

(alias
 (name runtest)
 (action
  (diff specs.expected specs.output)))
